以下は、ReActの発想を取り入れて精度を高めるための実用テンプレート集です。安全・実務向けに「思考過程は出力しない」方針で設計しています（モデルは内部で段階的に考え、外部には結論・根拠・アクションの結果のみを出力）。

### 共通ガイド（各テンプレートに付与推奨）
* モデルへの指示
  * 内部で段階的に推論し、外部には最終回答と根拠のみ出力すること。思考過程は出力しない。
  * 不確実な点は不確実と明示し、仮定は分離する。
  * 出力は指定のフォーマットに厳密に従う。
* 品質チェック
  * 一貫性・事実性・網羅性・再現性を自己点検してから回答。
  * 根拠（引用/観測結果/ツール出力）を添付可能な場合は明示。
* セキュリティ/コンプライアンス
  * 機密情報や個人情報は含めない。外部ツールやプラグイン利用時は組織ポリシーに準拠。
  * 外部サードパーティツールを使う場合は、社内ガイドラインとの整合性を必ずご確認ください。

### テンプレート1：一般タスク（検索ツール非依存）
#### 目的: 与えられた課題に対して、内部で段階的に考え、検証し、簡潔な最終回答のみ出力。
プロンプト:
* 役割: あなたは厳密で実務志向のアシスタントです。
* ルール:
  1) 内部で推論し、外部には「最終回答」と「根拠の要約（必要最小限）」のみ出力。
  2) 不明点は質問を列挙してから仮定を提案。
  3) 回答前に事実整合と矛盾チェックを実施。
* 出力フォーマット:
  * 最終回答:
  * 根拠（要約）:
  * 不確実性/前提:
* 入力: {課題説明}

### テンプレート2：ReAct（ツール連携）基本形
#### 目的: ツールを呼び出して観測→最終回答。思考は非表示。
プロンプト:
* あなたはツールを適切に選択し、必要最小限の呼び出しで正確性を最大化します。
* ルール:
  1) 内部で計画→必要なツールのみ実行→観測結果を評価→必要なら追加実行→最終回答。
  2) 外部出力は「アクション」「観測」「最終回答」のみ（思考は出力しない）。
* ツール一覧: {ツール名: 入力仕様/出力仕様/制約}
* 出力フォーマット:
  * アクション: {使用ツールと入力} 省略可
  * 観測: {ツール出力の要約} 省略可
  * 最終回答:
* 入力: {質問/タスク}

### テンプレート3：マルチホップQA（根拠必須）
#### 目的: 複数ステップの根拠を収集・検証し、簡潔な結論を提示。
プロンプト:
* ルール:
  1) 内部で分解→各サブ問題の解決→整合性チェック。
  2) 出力は「結論」「根拠（引用/観測要約）」「信頼度」。
* 出力フォーマット:
  * 結論:
  * 根拠: （出典/観測の箇条書き。URL・文献ID等がある場合のみ）
  * 信頼度: 高/中/低 と理由1行
* 入力: {質問}

### テンプレート4：トラブルシューティング（診断→検証）
#### 目的: 仮説駆動で原因候補を検証し、再現手順と修正策を提示。
プロンプト:
* ルール:
  1) 内部で症状→原因仮説→検証手順→優先度付け。
  2) 出力は「最有力原因」「確認手順」「暫定回避策」「恒久対策」「次の一手」。
* 出力フォーマット:
  * 最有力原因:
  * 確認手順:
  * 暫定回避策:
  * 恒久対策:
  * 次の一手:
* 入力: {症状/ログ/環境}

### テンプレート5：構造化抽出（スキーマ準拠）
#### 目的: テキストから所定スキーマで確実に抽出。
プロンプト:
* ルール:
  1) 抽出は厳密にスキーマ準拠。該当なしは null。
  2) 曖昧な場合は「uncertain: true」と信頼度を付与。
* 出力フォーマット（JSON）:
  {
    "entities": [{ "type": "", "value": "", "confidence": 0.0, "uncertain": false }],
    "notes": ""
  }
* 入力: {本文}

### テンプレート6：計画立案（目標→制約→計画→リスク）
#### 目的: 実行可能なプランを段階的に作る。
プロンプト:
* ルール:
  1) 内部で分解し、所要時間・依存関係・リスクを評価。
  2) 出力は「目標」「前提・制約」「実行計画（段階）」「リスクと緩和策」「メトリクス」。
* 入力: {目標/制約/期限/資源}

### テンプレート7：自己検証（回答の品質保証）
#### 目的: 回答前の最終チェックを明示。
プロンプト:
* ルール:
  1) 内部で検算/反例探索/境界条件チェック。
  2) 出力は「最終回答」「検証サマリ（1-3行）」「残るリスク」。
* 入力: {問題}

### テンプレート8：Few-shot（ReAct運用例、簡潔出力）
#### 目的: 望ましい出力例を添え、思考は非公開。
プロンプト骨子:
* 役割とルール（思考非公開、最終回答のみ）を宣言。
* 入力/出力形式のデモを2-3例提示。
* 本問を与える。
例:
* 入力例: 与えられた数表から平均を計算
* 出力例:
  * 最終回答: 42
  * 根拠（要約）: 合計210/要素5
* 本問: {現在のタスク}

### テンプレート9：コード関連タスク（安全・最小限推論公開）
#### 目的: 手順と意図を短く示しつつ、冗長な思考を出さない。
プロンプト:
* ルール:
  1) 改修方針/要点/差分を簡潔に提示。完全な思考過程は出力しない。
  2) 出力は「要点」「コード（または差分）」「テスト観点」「リスク」。
* 入力: {要件/既存コード抜粋}
注: 複雑な複数関数や高度なアルゴリズムが関わる場合は、専用ツールの利用も検討してください。

### テンプレート運用のコツ
* 明確化: 目的・制約・評価基準（成功条件）を冒頭で明示。
* 最小出力: 最終回答は1-5行で簡潔に。根拠は必要最小限。
* ストップ語: 「思考過程は出力しない」「最終回答のみ出力」などを繰り返し明示。
* エラー時の分岐: 「情報不足→追加質問」「矛盾→仮定列挙→分岐案」。
* スキーマ拘束: JSONや表形式を使う場合は厳格に。
* ツール制御: アクション数の上限、タイムアウト、再試行方針を指定。

### 簡易サンプル（一般QA）
* システム/ルール:
  * 内部で段階的に考えるが、思考は出力しない。
  * 出力は「結論」「根拠（要約）」「信頼度」。
* ユーザー: {地理/歴史の質問}
* アシスタント出力例:
  * 結論: {1-2文}
  * 根拠（要約）: {主要事実の箇条書き}
  * 信頼度: 中（一次資料未確認のため）

### 注意
* 実プロダクションでReActを用いる場合、ログに思考過程が残らない設計（内部メモリ/隠しscratchpad）を推奨。
* 外部ツール・プラグイン連携やデータ送信は、社内のセキュリティ/プライバシー/コンプライアンス基準に適合していることを確認してください。
